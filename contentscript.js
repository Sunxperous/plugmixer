// Generated by CoffeeScript 1.7.1
'use strict';
var inject;

inject = document.createElement('script');

inject.src = chrome.extension.getURL('mix.js');

(document.head || document.documentElement).appendChild(inject);

window.addEventListener("message", function(event) {
  if (event.source !== window) {
    return;
  }
  if (event.data.method) {
    switch (event.data.method) {
      case 'plugmixer_save_playlists':
        return chrome.storage.sync.set({
          'playlists': event.data.playlists
        });
      case 'plugmixer_save_status':
        return chrome.storage.sync.set({
          'status': event.data.status
        });
      case 'plugmixer_load_request':
        return chrome.storage.sync.get(['playlists', 'status'], function(data) {
          return window.postMessage({
            method: 'plugmixer_load_response',
            playlists: data['playlists'],
            status: data['status']
          }, '*');
        });
    }
  }
});
